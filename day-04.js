// Advent of Code 2025 day 4

const input = `
@..@.@.@@@.@@@@@@@...@@@.@.@.@.@@@@@.@.@.@..@..@.@@.@@@@@@@@..@@@.@@@.@@@@@.@....@@.@@@@.@@.@.@..@@@...@@@@.@@@.@.@@@@@...@.@@@.@....@@.@
..@..@.@@..@.@@@..@@@@@@@@.@@@@@@@@@@@@@@@.@..@.@@.@@....@...@@...@@...@@.@@.@@.@@@@...@.@@.@@.@@@@.@@@.@@@@@..@@.@.@@@@@@@@@@@..@.@@.@@.
.....@.@@@@@@@@@.@@@@@@..@@......@...@@@.@@@@@...@.@@.@@@@.@.@.@...@@.@@@.@.@@.@.@..@@@@@...@@@@.@@@@@@@.@.@@.@..@@@@@.@@..@@...@.@@@@@@.
...@@.@.@...@@@..@@.@...@@..@...@@@@@@.@@@@..@@@@@@@@@..@@@.@@@@@@@@@@.@@@.@@@@@@@@.@@@@..@@.@..@.@...@.@.@@.@..@@@@@@@@.@.@@@@.@@@@@@@.@
@@@@@.@@..@@@@@@.@..@.@@@.@@@@@@@@@...@@@@@@.@@@@@@@@@...@@.@.@.@@@@@.@@@.@@.@.@@@@@@.@@.@.@@@@@@.@.@@.@@.@@@@@.@@.@@@@@@@.@@.@@@...@@@@@
.@@.@.@@.@....@.@@@@.@..@@@@@.@@@..@..@.@@@@@@@@...@@@.@@.@@.@@@..@@@....@.@@@@.@@@.@.@.@@..@...@@@@@@@.@@..@.@@@...@@@@@@@@@.@@.@..@@@@@
@..@...@@@..@@.@.@@@@@@.@.@@@@@.@@@@@@@.@@@@@@@.@@@@@...@.@@..@@@@@..@.@@.@@..@.@@@@...@..@@@@@@@@.@@@.@@.@@@.@@...@@@.@@@.@@@.@@.@@@@@@@
.@@.@.@@@@@@.@@@..@.@@..@.@@@.@@@@@.@.@.@.@@.....@@@.@@.@@@.@.@.@..@@@@..@@.@@@@.@@.@@@@@@...@@@@.@.@@@@@@@@..@@@@@..@@@.@@@@@@@@@@@.@@.@
.@.@.@..@@@@@.@.@.@@@@@.@.@..@.....@@@@@@..@@@@.@@@@@@@@@@@.@@@..@@@@.@@.@.@@@@@...@@@@@@.@@@@@@@@@@.@@@.@@@.@@@.@..@@.@@...@..@...@@@@@@
@@@@..@@@...@@@.@..@@@@@.@@.@.@@.@.@@..@@.@@@@@@..@@@.@@@@@@.@@@....@.@@@@@@@.@.@..@..@@.@@.@@@@@@.@.@@@@@.@.@@@..@@..@.@@@@.@@.@@..@.@..
@.@@.@@@@@.@@..@..@@..@...@@.@.....@@@@@..@@@@@.@@@@.@...@@@@..@@.@.@@..@.@@@.@@.@@.@.@@.@@..@..@@@..@..@@@.@.@.@@.@@.@@..@.@@@...@..@@@@
@@@..@.@.@@@@@@@.@..@..@@@@.@@@@@@@..@@..@@@@@@..@@...@@@@@..@..@..@@...@@..@..@@@@.@@.@.@@.@@..@@@...@@@.@.@@@@.@...@@@..@@@@@@@@.@.@@@.
@@..@@@@.@@@@@@..@@.@@@@@@.@@@.@@.@.@@..@@@.@@@.@.@.@@@@..@....@..@@.@.@@.@..@.@@.@@@.@.@@@@@@@@.@@@@..@@@....@@@@@@@@@@@@@.....@@.@@@.@.
@@..@@..@@.@@@.@..@@@.@.@@.@@@@.@@@..@@..@@@@@@@@@@@@...@@..@.@@@@.@@@@@@....@..@.@@.@@@@.@@...@@..@@.@.@@@.@@.@@@@@@@@@@@@@..@.@@..@.@@@
.@.@@@@..@@@@@@.@...@@@@@.@@@@..@@..@@@@..@@@@.@.@.@@.@@..@.@@...@@@@@@@@@@.@.@.@@@@....@..@....@@@@.@@.@.@.@@@...@@@@@@@..@@.@@@@@.@..@@
.@@@@.@@@@@.@@@@.@@@@@@@..@@@@@@@@..@@.@@...@@..@@@@.@@@..@@..@.@@.@.@.@@@.@.@@@.@@.@@@@@@@.@@.@@@@@@.@@.@@....@.@@@..@@@@@@@@@@.@@@.@@@@
@..@.@@@@@@.@.@@..@@@.@@@@.@..@.@@@.@@.@@@@@@@..@...@.@@@..@@@.@@@@@@@@@.@@@.@@.@@....@@@@@@..@.@@@@@.@...@.@..@@@@@@@@...@@@@@@.@@@.@@@.
@.@@@@@.@.@..@@.@@@@@@@.@@@@@@@@.@@.@@@...@.@.@@@@@.@.@@@@@@.@@.@....@@@..@@@..@@@@@.@@@@@@@@@@@@@@.@@@@.@@@.@@@@@@@@..@.@.@@@...@@@@@@.@
..@.@@@@@......@@.@@@.@...@@@@@@@..@@.@..@@@@..@@@@.@.@.@@..@@@..@@@@@....@.@@@@@@@.@...@@.@@@..@...@.@.@@.@@@.@@@@@@@..@.@@@@@@...@@@@..
.@@@.@@@.@..@.@@.@@.@.@@@@...@@@..@@@@.@..@@@.@@@@@..@.@@@@@..@.@..@@@@.@.@@@@@@@@@@@@.@.@@@.@@@@.@@@@@@@..@@@.@..@@@..@@...@@@@..@@@.@.@
@.@@.@..@..@@@@@@@....@..@@@@.@@@@@@@@@@@@.@@@@@@.@@...@@@@.@@@@.@.@..@@.@.@@..@@@.@@@.@@.@@@.@@.@@@@.@@@@@.@@..@@@@@..@..@.@.@@.@@....@@
@@.@...@@@@....@@@.@.@..@@@@.@@@@@@@@@@@@...@@.@@@@@@.@@@..@@@@@@@@.@@.@..@.@.@@@.@@.@@..@..@.@.@@@@.@.@@.@@.@@@.@.@@@@.@.@@........@@@.@
@@@.@.@.@.@@@..@.@@@.@@@@@.@@@@@.@@...@..@@...@@@@@@.@.@@@@@@@@@@@.@@.@@@@@@@@@@@@@@@.@@@@.@@.@@..@@@..@@@@@@.@@..@@..@@..@@....@@@@.@@..
@..@.@@@@.@@@@.@@.@.@@@@@@.@@@@@@@.@.@@..@@@@.@.@@.@@.@@@@@..@@.@@@@.@@@@.@@@@.@..@@@@.@@@.@@@@@@@@@...@@.@@@@@@....@@@.@@@@@.@@@@@@.@@.@
.@@@@@@@.@@@.@@.@.@@..@@@.@@.@@..@.@@.@@..@@.@@@@@.@@@@.@@@@@@..@@@@.@..@@@.@@.@@....@@@..@@@.@@.@.@@.@@@@..@@...@@.@.@@@.@.@.@@@@.@.@.@@
@@@@..@.@...@..@...@..@.@@@@@@.@.@@@@..@@@@@.@..@@.@@@..@@.@.@@@@.@.@.@@@@@.@....@@@@..@.@@.@...@@@@@..@@@@@@@@@.@..@@.@@@@@@..@@@@@@.@.@
.@...@@@@@.@.@@.@@@..@@@@@@@.@@@@@.....@@@@.@@@@@@.@@@@@@@@@.@....@..@@@.....@..@@@@.@.@@......@@..@@..@.@..@@@@@@.@@@@@@..@.@@..@@..@@@@
@@@...@@.@@@..@@..@...@.@@@@.@@@.@@@@@@@@@.@..@@@@@@@@@@@@.@@@@@@@@@@@@....@@@.@.@.@@.@.@.@@@@@@@@@@@.@@@@.@..@@.@...@@@...@@@@@@@@@@@.@@
@....@@.@.@@@@@@@@@@@@.@@@.@.@@@@@@.@@.@@@@.@@@.@.@@@.@@.@@....@@.@.@@@@@@@@.@@.@.@@@@.@.@.@@..@@.@@@@.@@@..@@@.@@@@...@..@@@@@@.@@.@@@@.
.@.@@@.@.@@@@@..@@@@...@@@.@@.@@@..@@@@.@@.@@@@@@@@@.@@@@@@..@.@@.@@.@..@@@@@.@.@..@@..@@@@@@@@.@@.@.@@@.@@@@.@@...@@@@@@.@@..@.@@.@.@.@.
@.@....@..@..@.@@.@..@@@@.@@@@@@@.@.@..@@@@.@@@.@@@@.@@.@@@@...@@@@@@.@@@@..@@@@@@@.@@@.@@@@@@@.@@..@@.@@@.@@@.@@@@@@@..@..@@@@@@@@@@@@@@
@@@@....@@@@@@.@@@@@@.@..@@@@@...@.@@@@@@@@@@@@..@.@.@@@.@@@@@.@@....@@@@@@@@@.@.@@@.@@@@@@.@.@@@@..@..@@@.....@.@.@.@@.@@..@@.@..@@@..@@
.@.@.@@@.@@.@@@@@.@@@@@.@@@.@@....@@@@@@@@.@@@@@..@@@@@...@@@@@@@.@@@@@..@.@@@@@@@@@@..@@....@@.@@@.@.@@@@@@@@@@@.@@@..@@...@@@..@.....@@
@@.@@.@@@..@@@.@@.@@.@@@@@.@@.@@@@@@@@@@.@.@@..@@..@@@@@@...@.@@..@.@@@.@@@@@@@@@.@@@@.@@@.@.@@.......@@.@@..@@@@@@.@@@.@@@@@.@@.@@.@.@.@
.@@@@@@@@@@.@@@..@@@@.@..@@..@@@@...@.@@@....@@@@..@@@@@..@.@@..@@@@@@@.@@@@@@..@@.@@...@..@@@@.@@@.@.....@.@....@@@@@...@@@@@@@@@@@.@@@@
.@@@..@@@@@@@.@@@..@@@@@...@@@.@@@..@@...@.@.@@@.@@.@@.@@@@@..@@@.@@@.@@@..@@@.@@.@@@@@@@@@.@@.@...@@.@@@.@@.@@@@@@..@@@@..@..@@.@@@@..@.
.@.@@@@.@@.@@.@@..@@...@@@@..@@@@...@.@.@@@@@@...@.@@..@@..@.@@@..@@@.@@@@....@@.@@@@.@@@@@@..@@.@@@@.@@.@.@@@@@@@..@@@@@@@@.@..@@@.@..@@
@..@@..@.@.@@.@@@@@..@@@..@@.@@.@@@.@@@..@..@@...@@....@..@@@@@@@@@.@@@@@@...@.@@.@.@@@@..@@@...@..@@.@@.@@@@..@..@.@@..@@@@.@..@@@.@@@.@
@@@@.@@.@@@..@@@@@@@...@.@@@..@@@@.@@.@.@.@@.@@@@@@.@@.@.@@@@@@@@@@.@@..@@@@@@.@@..@..@@@@@@.@@.@@@..@@.@.....@..@@.@.@@.@@..@@@.@@.@@@@@
.@@@@@@@@@@@@.....@.@...@@@.@@@.@@@.@@@.@@@@.@@....@.@..@..@@...@.@@@@@@@@@..@@.@@@@.@.@@.@..@@@.@@.@@@@@.@..@@@@..@@@@@@@.@.@@.@....@.@.
.@@.@@...@@@@@@@@..@.@@@@@@.@@@@@@.@.@@@.@@@.@@@@@.@@@@@..@@.@@@@.@@@@.@@@@...@@@.@@@@@@@@@@@@...@@.@@@@@.@.@.@@@@@@.@@..@@...@@@@@@@@@@@
@@@@@@.@.@.@.@@.@@@@@.@@@@@..@@..@@@.@..@.@@@@.@@@.@@@@@.@@.@@.@@.@..@@@@@@@@@.@@.@@@..@@@...@.@@.@.@@..@@@@@.@.@@@@@..@.@.@....@....@@@.
@@.@@..@@@@@@@.@@@@.@@.@@.@@.@@..@..@..@.@@@@@@.@@..@@.@@@@.@.@@@@@.@@@@.@..@@..@@@@@.@.@@@@@@@@...@.@...@.@@@.@@@.@.....@@@......@.@@..@
@@.@@.@@...@@@@@@@.@..@@@@@@@.@..@@.@..@...@@..@@@@@.@@.@@@@.@@@@...@.@...@..@.@@.@.@@@@@@@@@@..@...@@@@..@@@.@.@.@@.@@.@.@.@@.@@.@@@@@..
@@.@.@.@@@@@.@@@@.@@@@@.@@.@.........@@@.@@@@@@@.@@@@.@@@@@.@@@..@@.@@@@..@@.@..@@...@@@@....@@@@@.@@...@@@@@@@@@@.@@.@@.@.@@.@@.@@...@@@
@@...@..@.@.@@..@..@@..@@@@@@.@.@@@@@.@@@.@.@@@@.@@@@@@.@@@.@@@.@@@.@@@@@@@@.@.@@..@.@@.@@@.@@@@.@.@.@@@.@.@@@@@..@@@@@@@@...@@..@.@..@@@
.@@@@..@@@@.@@@@@@@@.@.@@..@@@...@.@..@@@@@..@@@@@.@@@@@@@.@.@.@@..@@@@@.....@@.@.@@@..@..@..@.@.@@.@@@@@@@@@.@@..@.@..@@@@@..@@@@@..@@..
.@@.@....@..@.@....@....@..@@@..@@@.@@@@@@@@@@@@@@@@@@.@@@@@@@@@@@.@@@@@.@.@@@.@...@.@@.@..@.@@..@.@@.@.@.@@.@.@.@@@.@@@.@@.@@@@@.@@.@@@@
@@...@.@@@@.@@@@@@.@@@.@.@.@@@@.@.@.@@..@@..@.@@@@@.@@@.@@@@@@..@.@@@@.@.@@@@@@@@.@.@@@@.@@...@.@@@.@@@@.@@..@..@@@.@...@.@@..@@@.@.@..@@
.@..@@@..@@@@.@@@@.@@..@@@.@@@.@@@@...@@...@@@@@@.@@@@.@@..@.@...@@@...@@...@.@@@@@.@@@...@.@@@.@@.@@@@.....@.@@@@@@@@@@@@.@@@@@@.@.@@@@.
.@@.@..@@.@@@..@.@..@.@.@.@@.@@@.@@@...@.@@..@@@@.@@..@@@...@.@@....@@@@.@@@@@@@.@..@.@@@@@.@@......@.@..@@@.@@@@..@@@..@@.@@@@@.@.@@@@@@
@@@@.@@@@@@..@@@@@@@@@@...@....@.@@@@@@@..@@...@.@@.@..@@@@@.@.@.@..@@@...@.@@.@@.@@@..@.@@@@@.@....@@.@@@@@@..@@@.@@.@..@@@@@@@.@..@.@@.
@@@.@@@@.@@@@...@.@@.@@@.@@@@@@@@@.@@@@.@@.@.@@.@@..@@.@@..@.@..@@@@@.@@..@@@.@.@..@.@@@.@.@@...@@..@@.@@@.@.@@@.@@.@.@@@@@@@@.@@.@.@@@..
@.@@@@@@.@.@...@@.@..@@@@@@@.@.@@.@.@.@..@@@...@@@@@..@.@..@@@.@@@.@@.@@....@@@@.@@@.@@@@@@..@@.@@@@@..@@@...@.@@..@..@..@@@@@@@.@@@@@.@.
@.@@@@@@@@@@.@.@@......@@.@.@..@@@.@..@@.@.@@@@.@@..@@......@@@@.@.@@@@..@@@@@@@@.@.@@@@.@@@.@@@@@@@@@@@@.@@@.@@@@.@@.@@.@@.....@@@@@@.@@
@..@.@@...@@@@@.@@.@..@@@@.@@@.@@......@.@@@.@.@@@@.@@@@.@@@.@.@...@.@.@@@@.@@@@@.@.@@@@.@@@@@.@@@..@@@@...@.@@..@@@@.@@@.@@@...@@.@@@.@@
....@@.@@.@@@@@.@...@@@@@@@@........@@.@@@.@@..@..@..@.@.@.@@@@@....@.@..@@..@.@.@@@@@@@@@@@..@@@@.@.@@@@@@....@..@@@@@@@..@@@@@@@@@..@.@
@@@@.@@@@@@...@@@.@@@...@.@@.@.@@@@.@@@@@@.@.@.@@.@@@@@.@@@@@@@@.....@@@.@@@.@@@.@.@.@...@@@.@..@@.@@.@..@@@...@@@...@@.@.@.@@@..@@.@.@@@
@.@@.@..@..@.@.@.@@@@@@@...@@.....@@.@....@@@@.@@...@@@@@@@@.@.@@@..@.@@@..@@@@@..@@@.@@.@@@@@@...@@@.@@@@@@..@@@@@.@@@@@.@@@.@@@@.@@@@..
.@@@@.@..@@@@@.@@@@.@@@@@.@@.@@@@@.@@..@@@.@@.@@..@.@@.@..@@@.@@.@@.@@@.@@@.@.@.@@..@@@@.@@@@@@..@.@@@@@@.@@@@..@.@@@.@@.@..@@.@@.@@.@@@@
.@@@@@@@.@@@@@@@.@@@@@.@..@@.@@@@@@.@.@@.@@@@@@...@...@@@..@@.@...@@.@@..@@..@@@@@.@@@...@@.@..@.@.@@@@.@@@@.@@@@@@.@..@@@..@.@....@..@@@
@.@@@@@@@@.@.@@.@.@@@@@@@@@@@@@.@@....@.@@.@@@.@.@..@@@@@@..@.@@@@@@@@.@@.@.@..@.@@@..@@@@@@@@@@@@..@@@.@@@@@@@.@@..@@.@@.@..@@..@@@@.@@@
.@@@@@.@@@@@@.@@@@@@@@@@@@.@@@.@....@@.@..@@..@..@.@@@@.@@@@.@@@@..@@@@.@@@@@@@.@@@.@@@.@@.@@@@@@@@@@@.@.@..@.@@@@@.@@..@@...@@@.@@@@..@@
.@@.@.@@@@@....@@@.@.@@@@@@..@@....@@@....@.@@@@.@@@.@@.@@@@.@@.@@@.@@@.@.@@@..@@@@@.@....@...@@..@@@.@@.@@@@.@.@@@@@.@@.@@@@...@@@..@.@@
@@@@.@@@@@.@@.@.....@..@@.@..@@@@.@@@@@@@@.@@@@@@@.@@@.@@.@@@@@.@@..@@@@@.@..@@..@.@@..@@@@@@@.@@@@@@@@.@@@@..@@.@@@@@@..@@.@@@@@..@@@@..
.@@@@@@.@.....@.@.@@.@@@.@@@..@.@@.@..@@..@@@.@.@@..@@@@.@..@@.@@.@@@@.@@..@@@@...@@@@.@@...@@@@@@@..@.@@@@@@..@@@.@@@...@@.@@@@..@@.@..@
@..@.@@@@.@.@@.@.@@@.@@@.@.@..@.@.@...@@.@@@@@@@@@@@@@@@..@@.@@@@@.@@@@.@@@..@@@.@@@.@@@@...@@@@.@@.@@@@@.......@@@@@@@@@..@.@@@@.@@..@@@
@@...@@@@@@@@.@@@..@@..@@@@@@@.@@@@@@@@.@@@@.@....@@.@.@@@@...@@@@@@@..@@@.@@@.@@@@@@@@@@@.@..@@@@@@@@@@.@@.@@@@.@..@.@@@@@@@@@@@@.@@@@.@
@@..@@@.@@@@@..@..@@@@@....@@.@@@@.@.@@@@@.@.@@.@@@@@@@.@.@@.@@@@@@.@.@@@@.@@.@@@.@@..@@@..@.@@@.@@@@@@@@@@@@@.@@@..@@.@@...@@@@@@@@..@..
@@@@.@@.@@@.@@@@...@...@@@.@@@@@.@@..@@@@...@.@@.@@.@@@..@@.@@.@@@@@@@@@..@@@.@@..@@.@.@@@@@...@@@@@@..@@.@..@@.@.@@@..@@@@@@@.....@@.@@@
@@@@@.@@....@@..@@.@@.@@@@..@@..@@..@@@...@@@...@@@...@@@@@.@@@@.@.@..@@.@@@@...@.@@..@.....@..@@@..@@@@@@.@@..@@.@.@@@@@@..@@@@.@@@@@@..
.@@@.@@..@@.@@@@.@@@.@...@..@@@@@@.@@.@@@@.@@@@.@@.@....@.@.@@.@@..@@@.@@.@.@.@.@@@@@@@..@.@.@@@@.@..@.@@@@.@@@..@..@@@.@.@..@@@@@..@@.@@
@.@.@@@@..@..@@..@....@@@@@.@@.@@@@...@.@....@.@@@@..@@.@.@@@@.@@@.@..@@@...@@@@.@@...@@@@@@.@..@.@@..@.@@@..@@..@@.@.@.....@@@@.@@.@.@@@
@...@@@@@@@.@.@@@@..@@@@@@@@@.@.@.@@.@.@@.@..@@..@@.@....@@@@...@.@@@@@@@@@@@@@@@@@@...@..@@@@.@...@@....@.@..@@.@.@@@..@@@@@..@.@....@@.
@@...@.@.@@.@@@.@@.@.@..@@@@@@@@@@@@.@@@.@@.@.@@@@@..@@..@@.@..@.@@@.@@.@.@@..@@..@@@..@@.@..@@.@..@@@@@@@..@@@.@@@@@@.@.@@@@.@.@@.@@@@@@
..@@.@@@.@@@@@.@..@@@.....@@..@@@@@.@.@@...@@...@..@.@@@@@@@@@@@@@.@@@@@@@.@@..@.@@@@@..@@@.@.@..@.@@.@@@@.@@@@.@@@@@@@.@.@@.@.@@@.@@...@
@@.@@@...@.@...@..@..@@@@@@@.@.@...@..@@@@..@@.@.@@@.@.@@@.@@@.@@.@@@@@.@@@.@.@.@...@@..@@@@@@.@.@.@@@@@@@.@@..@@@@@.@@@...@..@...@@@.@@@
.@@@@.@@@.@..@@@@@@@@..@@@@..@..@@.@.@@@@.@@@@..@...@@@.@@@@@@..@@@@.@@@@@@.@@@@@@@@@@..@@.@@@.@@@@.@@@@@.@@@@@..@@@@@@@@@.@@@@..@.@@@@.@
@@.@@...@.@@..@.@@@.@@@.@....@@@@@@@.@@@@.@@.@.@@@@@@@.@@@@@@@.@@@.@..@@.@@@@...@.@@@@@.@.@@.@@@@@@@.@.@@@...@@@@@.@@.@@@....@.@@.@@.@@@.
@@..@@..@@..@@@@.@@..@@.@@@@@@.@@@@@@...@@@@.@@@.@@...@@@@.@.@@..@@@@....@@@.@.@@@..@@......@@..@..@@@@..@@@.@.....@.@@@..@.@@@@@@@@@@@@@
@...@@..@@@@@@.@@@@@....@@@@.@@.@@@.@@.@@@@..@@..@.@@@@.@.@..@@@.@@.@.@..@...@@..@.@@.@.@.@@@.@@.@@@@@@..@@@@@@.@@.@@@@@@@..@@.@@.@@@.@@.
.@.@..@.@@@..@@@@@@.@@.@@@@@@.@@@@.@@.@@@@@@@@@@.@.@@@@@..@..@.@@@@.@.@@.@@@@.@@...@.@...@@@@..@@@@@@@@..@@@@@.@@@@...@@@...@@@@.@@@.@@@.
.@@..@@@@...@@.@@@@..@..@@.@..@@@@@.@@@@.@@@..@@..@.@@...@.@@@.@@@..@.@@@@@.@@@@@.@@.@@@@@@...@.@@.@@...@.@@@.@@.@@.@@@.@.@@@@@...@...@..
@@@.@..@.@.@@@@..@@@@@@@.@@@@@.@.@@@.@@..@.@@.@@@@@@@@@.@@..@@@@@@@@@...@@@@.@@.@@@@@@@.@.@@@@@@@@...@@@@.@@@@...@@@@.@@@@@@@.@@@..@..@@@
@.@..@@@@@@.@@.@.@...@.@@..@@.@.@@..@.@@@@@@@@..@..@@@@@@@@@@@@@..@@...@@.@@@@@@.@@@@...@@.@..@...@@@@@@.@@@.@@@.@@@.@@.@@@@@.@@@..@@.@.@
..@.@.@@..@..@@.@@.@@.@@@@@.@.@.@.@@@@@@..@..@@@@@.@@.@@...@@@@@.@....@@@.@@@.@.@@@@@.@@...@@.@@.@@...@@@@@@..@.@@@@@@@@@@@@.@..@@@...@.@
@@@@@@.@....@@.@@@@@@@@@@@@.@@@@@@@.@@.@@@..@@...@.@@@.@..@@@@.@@@.@...@@..@.@@..@@.@@.@@@..@@..@...@@@@..@.@...@@@..@.@@.@..@.@@.@..@@@@
@@@@.@@@@@@@@@.@@.@@.@@@@.@@.@@.@@@@@@@@@@.@@@@.@..@...@@@@.@.@@@@@@@@@@@@.@@.@@@@@@@.@.@@@.@@@@@..@.@@..@@@..@@.@@....@..@@@@.@@@@@@@@@@
@@.@@.@@@.@...@@.@@.@@.@@@@@..@@@..@@.@@@@@@@@@@@@@@.@@@@..@...@..@@@..@@.@@@.@@@.@@@@@@@@@@@.@@..@@.@..@.@..@@.@.@@.@.@@@@@.@.@@@@@.@.@.
.@@@@@@.@..@..@.@@.@@@@..@.@.@.@@.@.@..@@@.@@@..@@@@@@.@@@@..@.@.@@@@@@@@@@@@.@@@.@@@@@.@.@@....@@@.@..@@.@.@.@@@.@.@..@.@@.@@@@@@.@@.@@@
..@.@@@@.@@@..@.@@@..@@......@@@@@.@.@@.@.@.@@.@..@@...@.@@@...@@@.@@.@.@...@..@@.@.@.@@@@..@.@.@@@..@@.@..@@.@.@@@@@@@@.@..@@@@@@..@@...
@@.@@@..@@@@@@@@@@@.@@@@.@@@@@@@@@@@.@.@@@@@@@..@@.@@@@@.@@@@@.@@..@@@@@.@@@....@@@@.@@@@@@@.@@@@@@@..@.@@@..@@@@.@@@@.@@@..@.@@..@@..@@.
@@@@.@@@@..@@..@@@...@@@....@@.@@@@@@@@@@@..@..@@@@@.@@@@@@@@@.@..@..@@@.@.@..@.@@@@@@@@@@...@..@.@@@.@.@.@.@.@@@@.@@@.@@@@@@.@..@@.@@.@.
@.@@.@@@@@@@.@@@@@@@.@..@@@@@.@@@@@..@@@...@@@.@@@.@@.@@@@.@.@@@..@.@@@@@..@@@.@@@@@@@@...@@@..@.@.@@.@@@@@.....@@@@.@@@@.@@@@@.@..@.@.@.
@@...@..@@@@@@@@@@@@@...@.@@@@@@@@.@@@@@...@..@.@.@.@....@@@.@@@...@@.@@@.@@.@@@...@@@..@..@@@@.@..@.@@.@@...@.@@...@@@...@@@@@.@@@@@...@
.@.@..@....@@.@@...@.....@@.@.@@@@@@@.@@.@@@@.@....@@..@..@@@@..@@@.@@.@@.@@@@..@.@..@@@@@@@.@@.@.@@@..@...@@@@..@.@.@@.@@@@@@@@@.@.@@..@
@.@@@@.@@@@...@..@.@@@@@@@.@@@@@@@.@.@@@@...@..@@@@.@.@..@.@@@@.@@@@@@..@.@@@.@@@@@@...@..@@@@.@.@@@@@@@.@@@@.@..@@.@@..@@..@@.@@.@@@@@.@
..@@.@@@..@.@@@@@@@.@@@@@@..@..@.@.@@...@@@@@.@.@.@.@@@.@@@.....@.@.@@@@@@..@@@@..@@.@@..@@@@@@.@.@@@@@@.@..@..@@@...@.@@@@.@@@@@@@@@.@.@
@.@@.@.@@.@@.@@.@.@.@@...@@@@..........@..@@@@.@@@@@@@@@@@@@@@@.@....@....@@@@@@.@@@@....@.@.@.@@@...@@@@@@@.@@@@.@@@@@@@.@@.@...@@..@...
@@...@@.@.....@..@.@@@@@@@.@........@@@.@.@.@@@.@..@@@..@@@@@.@@@.@.@@@@@..@@@.@@@.@@@.@@@@@@.@.@..@@.@@@@@@.@@@@.@@..@.@.@@@@@@@@@@..@.@
@@@@.@@.@...@@@@@@.@@.@.@@@@@@@@@.@@@@.@@@.@.@@@@@@@@..@@@@@@@@.@@@@@.@@@@...@..@.@.@.@@...@@@.@@..@@.@.@@@@@@@..@@@.@..@@.@@@.@@..@@@.@@
@@.@@.@@.@@@@@@@@.@@@@@..@@@.@.@@@@..@@.@......@@@@.@@@@.@.@@@@.@.@@.@@.@..@..@@.@@.@.@@.@@.@@.@..@@.@..@.@@.@@@@.@@@@@.@@@.@..@.@@.@..@@
@.@@.@@.@@.@@@@@..@@@.@@@.@@@@@@@@@@@.@.@@@.@.@@.@.@@@@@..@@..@@@@@@.@@@.@....@@@@@.@@.@@.@@@@@@@@@@@@@.@@.@.@.@@@@..@@@@..@@@@@@@.@.@@.@
...@..@.@@@.@@@....@.@@....@@@...@.@@@.@@@@@@@@@.@@@.@.@..@@@@..@.@.@..@@@@@@@@@@@.@@@.@@.@@@@@@.@.@@@.@.@@@.@..@...@@@.@@@@.@@..@.@.@@@.
@@@@@@.@@@.@@.@..@@@.@@...@@.@@@@@@@@@..@@...@.@@@@.@@@@@@@.@@@@@@@@.@@@.@@@.@@@@.@@@@@..@@@@..@.@..@...@.@.@@@@.@@..@@@.@@..@@@@@@@.@..@
@@@.@.@..@@@@.@...@...@@@@..@....@@.@@@...@@.@.@@@@@@.@@@@.@.@@@@..@@..@@@@@.@.@@@..@.@..@.@@@..@@.@@.@@.@@@@@@.@@@@.@@...@@@@@..@@@@@.@.
@..@.@@@@@.@@.@@@@@@@@@@@@@@@@@..@@@.@@@....@@...@@......@..@@.@@@@.@.@..@@@@.@@@.@@@@.@.@.@.@@.@@.@@@@@@.@.@..@.@@@..@.@@.@@.@@@@....@@@
@@..@@@.@@@...@@@.@@@@@.@@.@.@.@@.....@@@@...@@@.@@@@@.@@.@.@@.@@@..@.@@....@@..@.@@@@...@...@@@.@@@....@@@.@@..@..@.@..@@..@@..@@@@@@.@@
@@@@.@@@@@@@@@.@@@@@@@@@.@.@@@@@@@@..@.@..@@.@@..@@@@@@@.@@@@@@@.@@@@..@..@.@..@.@@@...@.@.@@@@@.@.@@@..@@@@.@@@.@@.@.@..@@@.@.....@.@..@
.@..@@@@...@@@..@...@@.@@.@@@@.@@..@@@@@@@@@.@@@@.@@@@.@@.@.@@@@@@@@.@.@.@@@.@.@.@.@.@@@@.@.@..@....@@@@..@.@@.@@@@...@.@.@@@.@@@@@.@@@..
...@@.@@@@...@@.@@@.@@@.@@@@@.@@.@@.@@.@@@...@..@.@@.@@@@@.@@@.@@@.@.@..@@@.@@@@@@...@@.@@@.@@@@@@..@@...@@@@@@@....@..@.@@.@@@@.@.@@@@@@
......@.@@@@@.@..@@@@@@@@@.@....@@..@@@@@@@@@@.@.@@@@@@.@.@@@..@@@..@@.@@.@.@...@@@@.@@@@.@@@@.@@.@@@.@@.@@@@@@..@@@.@.@..@@.@.@@@@.@@@..
.@@..@@@@@@@@@@@@.@@..@@@.@.@.@.@.@@.@@@..@@.@@@.@@@@@.@@@@@@@@@.@.@@@@..@@@@.@.@...@.@@@@..@@@.@@.@.......@....@@@.@@.@.@@@.@...@@@@@@@@
@@@@...@@..@@.@@.@@@@.@@@@.@.@@@.@..@..@.@.@.@@@@@@@@@..@.@.@..@..@...@@@@@..@.@@@..@@@@@@@.@@.@@@@.@@.@@...@@@@@@@..@@@@@.@@@.@@.@@@@@.@
@@..@....@@.@.@..@.@@@.@@.@@@@@@..@@@@.@@.@@@..@@@.@@@@@...@@@@..@@@@.@..@.@.@@@@@.@.@@@..@@.@.@..@@.....@.@.@@.@@.@@..@@@@.@@.@@@.@.@@@@
.@@@.@@@.@@....@@@@....@.@...@@@@@.@@..@@..@@..@..@@@@@@@..@@@@..@.@@@.@..@@@@@.@@@.@@.@..@.@.@@@.@@.@@@.@@@@....@.@@.@......@@@@@@..@@@@
@@@@@@@.@@@.@@@@@@@@@@@@.@.@@.@.@@..@.@@@@@@@@@@...@@.@...@@@@..@@@@@@@@@@@.@@@@.@@@.@.@@.@@..@@@@@..@@@@@..@@@.@.@@@..@.@@@.@@@@.@.@@@@.
@.@.@.@.@@@.@@.@.@..@@@..@@@..@@.@.......@@@@.@.@.@...@..@@@@.@.@@@@@@.@.@@@@@@.@@.@.@@@.@....@@@@@@@.@@@@@@@@@@@@..@@@@@.@@@@.@@@@...@@.
@..@@@@@.@@..@@@@@.@@@@@.@@...@@@.@.@@@@@.@@@..@@@@.@@.@@@.@.@@@@@@@@@.@@.@@...@@..@@@.@...@@@@@.@@@.@@@@@..@@@...@.@@@..@@@@@@@@.@@@.@.@
@.@@@@@.@@@@@..@@@..@@..@@.@@.@.@@@@.@..@@..@@.@..@@.@@@@@.@@@@@@@.@@@@@@@@@@@@@...@.@.@@@..@.@@@...@..@@@..@@@@@.@@@@@@@.@@.@@@@@..@@@..
@@..@.@@@@@@@@@.@@@@@.@@@@.@@@@.@@@..@@@@@@@@@@.@@..@@@.@@@@@@@...@@@.@@@@.@.@@@@@@@@@@.@.@.@@@@.@@..@.@.@.@...@@@@@.@.@@@..@@@..@.@.@@@@
.@@@@@@@@@.@..@.@@@.@@.@..@.@@@..@.@@@.@@@@@@@@.@.@.@@.@@@...@@@@@@@@@.@@@@@@@@.@@@@...@@@.@.@.@@.@@@@@@@..@@@.@@@@@.@.@@.@@.@.@@.@.@@...
@.@...@@@.@..@...@.@@@..@.@@@@.@...@..@@@@@@@@@@@....@@.@@....@@@.@@..@@@@@@.@@@@..@@.@..@@.@.@@..@..@@@.@.@.@@...@@@@@@@@.@.@.@@@@@.@@@@
@.@@@@.@@@.@..@@.@@@@.@@@.@@@@@.@.@@@.@.@..@..@@@.@@@@.@@@@@@.@@@@...@@@....@..@@@@.@@@..@@..@@@.@@@@@.@.@@@@.@.@..@@...@...@@@@@@.@..@@.
@@.@@@.....@@@@@@@.@...@@@..@..@@@@.@@...@.@@@@....@@.@@.@.@@.@.@@@@.@@.@@@@@@@@@@@@...@.@..@@@.@@.@..@.@@@.@@@@@@@..@@.@@.@@@@@@@@@@@@.@
..@@@@@@@....@.@@@@.@.@@@@.@@@.@@@.@@@.@@@..@@.@@.@@@@@..@.@@..@@@@@@@@@@@@.@@..@@.@@@..@@@@@@@@@@@@@.@@..@.@@.@@@.@@@@@@@..@.@.@@..@@@@@
@..@@@..@.@@@@@@@@@@.@@@@@@@@.@@@@.@@...@.@@@.@@@..@@.@@@.@.@@@@@@@@@@.@@.@@@@.@@@.@@.@@@@@@.@....@...@@@.@@@@@@.@..@.@@.@.@@@..@@.@@@@.@
@@@.@@....@@@.@.@@.@@..@..@.@.@@@..@.@@@@..@..@.@@@@@@@@.@.@..@.@@@.@.@@@@.@..@..@..@@.@.@@.@@.@@@@@@@@@@.@...@@@@.@@.@@@@.@@@@@.@@@@@@@.
.@@@.@@.@@..@....@@@@..@@..@@...@@@.@@@@....@@@@..@.@.@.@.@..@@@.@@@@@@@@.@@.@@@.@.@@.@..@..@.@.@.@@@@.@@@@@@.@...@@.@@@.@@@@@@@@.@@....@
@..@@..@@.@...@..@.@.@@.@@...@@@@@@.@@..@@@@@.@@@@@@@@.@..@@@.......@.@.@.....@@@@@@..@.@.@.@@@@..@.@.@@@@@@.@@.@...@.@@.@@@@..@.@@@@@@..
@@@@@@@@@...@..@@@@@@@.@@.@@@.@@@@@@..@@.@@@@@..@@.@.@@@@@.@@@@@@@..@@@@@@@@@@@..@@@@.@@.@@@@.@@.@@@.@@@@@@@@.@@@.@..@.@.@@.@..@.@..@.@.@
@@..@@.@@.@.@@@@@@..@@@@.@@@@...@@@@@@@@@..@@@.@@@.@...@...@.@@.@..@....@.@@.@@.@@@..@...@.@@@@@@@@@@...@.@@@@.@..@...@@.@@@@..@@.@@.@.@@
@@.@@.@..@@..@@@@@.@@.@@@@..@@@@@@@@.@.@@.@@@@@@@@@@.@..@@.@@..@@@@@.@@@@.@.@@..@@@@@@@@.@@..@....@@@@@@@@.@.@@..@@...@@.@@@.@..@.@@@@@@@
@.@@..@@@..@.@@.@...@@...@@.@....@.@@.@.@@@@@@.@@.@@.@@@@.@@@@@.@@.@..@@@@..@@@@.@@@@@@..@@.@@@.@@@.@@@@@@@.@.@..@..@@@@@...@@.....@@@@@@
@..@@@@@.@@.@....@@.@.@..@..@.@@@.@@@.@.@.@@@.@..@@@@..@@@@@@.@@@@.@.@@...@@@.@@@@.@@@@.@..@@@@@.@.@.@.@@@@@@..@.@@@@@@...@@@@.@.@.@@.@..
@@@@@.@@@..@@@........@@@..@.@@...@..@@@@@@@.@.@@@@.@@@@@@@...@@@@.@@.@@.....@@@.@..@.@@@@@.@@@@@@.@.@@.@.@@@@.@@.@.@.@.@@@@..@.@.@.@@..@
...@@@@..@@@.@.@.@.@@.@@.@...@...@@@.@@@.@@.@@@.@@@..@@.@@@@.@@@@@@@.@.@..@@.@@@.@.@@..@@.@@@@...@@@..@.@.@@@@.@.@@@@.@@@@...@@...@@@@@@.
`;

// convert the list to individual ranges

const grid = input
	.trim()
	.split(`\n`)
	.map(row => row.split(``)
		.map(space => space === `@` ? 1 : 0)
	);

let total = 0;
const max_y = grid.length;
const max_x = grid[0].length;

for (let y = 0; y < max_y; y++) {
	for (let x = 0; x < max_x; x++) {
		// ignore empty spaces
		if (grid[y][x] === 0) continue;

		let neighbours = 0;

		for (const dy of [-1, 0, 1]) {
			for (const dx of [-1, 0, 1]) {
				// ignore the space itself
				if (dy === 0 && dx === 0) continue;

				// make sure the space exists (could also just use truthiness
				if (grid[y + dy] !== undefined && grid[y + dy][x + dx] !== undefined) {
					// add filled spaces to neighbour count
					neighbours += grid[y + dy][x + dx];
				}
				if (neighbours > 3) break;
			}
			if (neighbours > 3) break;
		}

		// if neighbours is under/equal to threshold, add space to total accessible spaces
		if (neighbours <= 3) total++;
	}
}

console.log(`The number of accessible rolls is ${total}.`);

total = 0;

// iteratively find all accessible rolls, count them, and after the counting, remove them and retry
while (true) {
	const cleared_spaces = [];

	for (let y = 0; y < max_y; y++) {
		for (let x = 0; x < max_x; x++) {
			// ignore empty spaces
			if (grid[y][x] === 0) continue;

			let neighbours = 0;

			for (const dy of [-1, 0, 1]) {
				for (const dx of [-1, 0, 1]) {
					// ignore the space itself
					if (dy === 0 && dx === 0) continue;

					if (grid[y + dy] !== undefined && grid[y + dy][x + dx] !== undefined) {
						neighbours += grid[y + dy][x + dx];
					}
					if (neighbours > 3) break;
				}
				if (neighbours > 3) break;
			}

			if (neighbours <= 3) {
				cleared_spaces.push({"x": x, "y": y});
				total++;
			}
		}
	}

	// clear the current list of cleared_spaces
	for (const clear of cleared_spaces) grid[clear.y][clear.x] = 0;

	// if there were no clears in this cycle, there are no more clears ever; exit the loop
	if (cleared_spaces.length === 0) break;
}

console.log(`The number of recursively accessible rolls is ${total}.`);
